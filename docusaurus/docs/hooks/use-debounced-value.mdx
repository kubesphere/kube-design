---
sidebar_position: 5
---

# useDebouncedValue

å¯¹å€¼è¿›è¡Œé˜²æŠ–å¤„ç†çš„ Hookï¼Œå¸¸ç”¨äºæœç´¢è¾“å…¥ã€çª—å£å¤§å°è°ƒæ•´ç­‰éœ€è¦å»¶è¿Ÿæ›´æ–°çš„åœºæ™¯ã€‚

## åŸºæœ¬ç”¨æ³•

```jsx live
function Demo() {
  const [value, setValue] = useState('');
  const [debouncedValue] = useDebouncedValue(value, 500);

  return (
    <div>
      <Input
        placeholder="è¾“å…¥æ–‡å­—ï¼Œ500msåæ›´æ–°"
        value={value}
        onChange={(e) => setValue(e.target.value)}
      />
      <div style={{ marginTop: '20px' }}>
        <div>å®æ—¶å€¼: {value || '(ç©º)'}</div>
        <div style={{ color: 'var(--ifm-color-primary)' }}>
          é˜²æŠ–å€¼: {debouncedValue || '(ç©º)'}
        </div>
      </div>
    </div>
  );
}
```

## æœç´¢è¾“å…¥

æ¨¡æ‹Ÿæœç´¢åœºæ™¯ï¼Œå‡å°‘ API è¯·æ±‚ï¼š

```jsx live
function Demo() {
  const [searchTerm, setSearchTerm] = useState('');
  const [debouncedSearch] = useDebouncedValue(searchTerm, 800);
  const [searching, setSearching] = useState(false);

  useEffect(() => {
    if (debouncedSearch) {
      setSearching(true);
      // æ¨¡æ‹Ÿ API è¯·æ±‚
      const timer = setTimeout(() => setSearching(false), 500);
      return () => clearTimeout(timer);
    }
  }, [debouncedSearch]);

  return (
    <div>
      <Input
        placeholder="æœç´¢..."
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        suffix={searching && <span>ğŸ” æœç´¢ä¸­...</span>}
      />
      <div style={{ marginTop: '20px' }}>
        {debouncedSearch && (
          <div
            style={{
              padding: '12px',
              backgroundColor: 'var(--ifm-color-emphasis-100)',
              borderRadius: '6px',
            }}
          >
            æœç´¢å…³é”®è¯: <strong>{debouncedSearch}</strong>
          </div>
        )}
      </div>
    </div>
  );
}
```

## Leading æ¨¡å¼

ç«‹å³æ‰§è¡Œç¬¬ä¸€æ¬¡æ›´æ–°ï¼Œä¹‹åè¿›è¡Œé˜²æŠ–ï¼š

```jsx live
function Demo() {
  const [value, setValue] = useState('');
  const [debouncedValue] = useDebouncedValue(value, 500, { leading: true });

  return (
    <div>
      <Input
        placeholder="Leading æ¨¡å¼ï¼šç«‹å³æ›´æ–°ç¬¬ä¸€æ¬¡"
        value={value}
        onChange={(e) => setValue(e.target.value)}
      />
      <div style={{ marginTop: '20px' }}>
        <div>è¾“å…¥å€¼: {value || '(ç©º)'}</div>
        <div style={{ color: 'var(--ifm-color-success)' }}>
          é˜²æŠ–å€¼ï¼ˆLeadingï¼‰: {debouncedValue || '(ç©º)'}
        </div>
      </div>
    </div>
  );
}
```

## å–æ¶ˆé˜²æŠ–

å¯ä»¥æ‰‹åŠ¨å–æ¶ˆpendingçš„é˜²æŠ–æ›´æ–°ï¼š

```jsx live
function Demo() {
  const [value, setValue] = useState('');
  const [debouncedValue, cancel] = useDebouncedValue(value, 1000);

  return (
    <div>
      <Input
        placeholder="è¾“å…¥æ–‡å­—"
        value={value}
        onChange={(e) => setValue(e.target.value)}
      />
      <Group spacing="md" style={{ marginTop: '10px' }}>
        <Button onClick={cancel} size="small">
          å–æ¶ˆé˜²æŠ–æ›´æ–°
        </Button>
        <Button onClick={() => setValue('')} size="small" variant="outline">
          æ¸…ç©º
        </Button>
      </Group>
      <div style={{ marginTop: '20px' }}>
        <div>å®æ—¶å€¼: {value || '(ç©º)'}</div>
        <div style={{ color: 'var(--ifm-color-primary)' }}>
          é˜²æŠ–å€¼: {debouncedValue || '(ç©º)'}
        </div>
      </div>
    </div>
  );
}
```

## è¡¨å•éªŒè¯

å»¶è¿ŸéªŒè¯ç”¨æˆ·è¾“å…¥ï¼š

```jsx live
function Demo() {
  const [email, setEmail] = useState('');
  const [debouncedEmail] = useDebouncedValue(email, 600);

  const isValid = debouncedEmail && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(debouncedEmail);
  const showValidation = debouncedEmail.length > 0;

  return (
    <div>
      <Input
        placeholder="è¾“å…¥é‚®ç®±åœ°å€"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
      />
      {showValidation && (
        <div
          style={{
            marginTop: '10px',
            padding: '8px 12px',
            borderRadius: '4px',
            backgroundColor: isValid 
              ? 'var(--ifm-color-success-lightest)' 
              : 'var(--ifm-color-danger-lightest)',
            color: isValid 
              ? 'var(--ifm-color-success-dark)' 
              : 'var(--ifm-color-danger-dark)',
          }}
        >
          {isValid ? 'âœ“ é‚®ç®±æ ¼å¼æ­£ç¡®' : 'âœ— é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'}
        </div>
      )}
    </div>
  );
}
```

## API

### å‚æ•°

```ts
function useDebouncedValue<T = any>(
  value: T,
  wait: number,
  options?: { leading?: boolean }
): [T, () => void]
```

| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|------|--------|
| value | éœ€è¦é˜²æŠ–çš„å€¼ | `T` | - |
| wait | é˜²æŠ–å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ | `number` | - |
| options | é…ç½®é€‰é¡¹ | `{ leading?: boolean }` | `{ leading: false }` |
| options.leading | æ˜¯å¦åœ¨å»¶è¿Ÿå¼€å§‹æ—¶ç«‹å³æ‰§è¡Œ | `boolean` | `false` |

### è¿”å›å€¼

è¿”å›ä¸€ä¸ªæ•°ç»„ï¼š

| ç´¢å¼• | è¯´æ˜ | ç±»å‹ |
|------|------|------|
| [0] | é˜²æŠ–åçš„å€¼ | `T` |
| [1] | å–æ¶ˆpendingæ›´æ–°çš„å‡½æ•° | `() => void` |

## ä½¿ç”¨åœºæ™¯

- **æœç´¢è¾“å…¥**: å‡å°‘æœç´¢ API è¯·æ±‚æ¬¡æ•°
- **çª—å£è°ƒæ•´**: å»¶è¿Ÿå¤„ç†çª—å£å¤§å°å˜åŒ–
- **è¡¨å•éªŒè¯**: å»¶è¿ŸéªŒè¯ç”¨æˆ·è¾“å…¥
- **è‡ªåŠ¨ä¿å­˜**: å»¶è¿Ÿè§¦å‘è‡ªåŠ¨ä¿å­˜
- **æ»šåŠ¨äº‹ä»¶**: é™ä½æ»šåŠ¨äº‹ä»¶å¤„ç†é¢‘ç‡
