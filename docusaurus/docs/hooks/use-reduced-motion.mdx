---
sidebar_position: 17
---

# useReducedMotion

æ£€æµ‹ç”¨æˆ·æ˜¯å¦å¯ç”¨äº†"å‡å°‘åŠ¨ç”»"åå¥½è®¾ç½®çš„ Hookã€‚

## åŸºæœ¬ç”¨æ³•

```jsx live
function Demo() {
  const reducedMotion = useReducedMotion();

  return (
    <div
      style={{
        padding: '24px',
        backgroundColor: reducedMotion ? 'var(--ifm-color-warning-lightest)' : 'var(--ifm-color-success-lightest)',
        borderRadius: '8px',
        textAlign: 'center',
      }}
    >
      <div style={{ fontSize: '48px', marginBottom: '12px' }}>
        {reducedMotion ? 'ğŸ¢' : 'âš¡'}
      </div>
      <div style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '8px' }}>
        {reducedMotion ? 'å‡å°‘åŠ¨ç”»æ¨¡å¼' : 'æ­£å¸¸åŠ¨ç”»æ¨¡å¼'}
      </div>
      <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
        å½“å‰ç”¨æˆ·åå¥½: {reducedMotion ? 'å‡å°‘åŠ¨ç”»' : 'å…è®¸åŠ¨ç”»'}
      </div>
    </div>
  );
}
```

## æ¡ä»¶åŠ¨ç”»

æ ¹æ®ç”¨æˆ·åå¥½å¯ç”¨æˆ–ç¦ç”¨åŠ¨ç”»ï¼š

```jsx live
function Demo() {
  const reducedMotion = useReducedMotion();
  const [count, setCount] = useState(0);

  return (
    <div>
      <Button onClick={() => setCount(count + 1)} style={{ marginBottom: '16px' }}>
        ç‚¹å‡»å¢åŠ  ({count})
      </Button>
      <div
        style={{
          padding: '40px',
          backgroundColor: 'var(--ifm-color-primary-lightest)',
          borderRadius: '8px',
          textAlign: 'center',
          transition: reducedMotion ? 'none' : 'all 0.5s ease',
          transform: `scale(${1 + count * 0.05})`,
        }}
      >
        <div style={{ fontSize: '48px' }}>ğŸ¯</div>
        <div style={{ marginTop: '12px', fontSize: '14px' }}>
          {reducedMotion ? 'æ— åŠ¨ç”»ç¼©æ”¾' : 'å¹³æ»‘ç¼©æ”¾åŠ¨ç”»'}
        </div>
      </div>
    </div>
  );
}
```

## è‡ªé€‚åº”è¿‡æ¸¡æ•ˆæœ

åŠ¨æ€è°ƒæ•´è¿‡æ¸¡æ—¶é—´ï¼š

```jsx live
function Demo() {
  const reducedMotion = useReducedMotion();
  const [visible, setVisible] = useState(true);

  const transitionDuration = reducedMotion ? '0s' : '0.3s';

  return (
    <div>
      <Button onClick={() => setVisible(!visible)} style={{ marginBottom: '12px' }}>
        {visible ? 'éšè—' : 'æ˜¾ç¤º'}
      </Button>
      <div
        style={{
          height: visible ? '200px' : '0',
          opacity: visible ? 1 : 0,
          overflow: 'hidden',
          transition: `all ${transitionDuration}`,
          backgroundColor: 'var(--ifm-background-surface-color)',
          border: '1px solid var(--ifm-color-emphasis-300)',
          borderRadius: '8px',
        }}
      >
        <div style={{ padding: '20px' }}>
          <h4>å†…å®¹åŒºåŸŸ</h4>
          <p style={{ marginBottom: 0 }}>
            è¿™ä¸ªåŒºåŸŸä¼šæ ¹æ®ç”¨æˆ·çš„åŠ¨ç”»åå¥½è®¾ç½®æ˜¾ç¤ºæˆ–éšè—ã€‚
            {reducedMotion ? 'å½“å‰æ— è¿‡æ¸¡åŠ¨ç”»ã€‚' : 'å½“å‰æœ‰å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»ã€‚'}
          </p>
        </div>
      </div>
    </div>
  );
}
```

## åŠ è½½åŠ¨ç”»é€‚é…

ä¸ºåŠ è½½çŠ¶æ€æä¾›é€‚é…çš„åŠ¨ç”»æ•ˆæœï¼š

```jsx live
function Demo() {
  const reducedMotion = useReducedMotion();
  const [loading, setLoading] = useState(false);

  const handleLoad = () => {
    setLoading(true);
    setTimeout(() => setLoading(false), 2000);
  };

  return (
    <div>
      <Button onClick={handleLoad} disabled={loading} style={{ marginBottom: '16px' }}>
        {loading ? 'åŠ è½½ä¸­...' : 'å¼€å§‹åŠ è½½'}
      </Button>
      {loading && (
        <div
          style={{
            padding: '32px',
            backgroundColor: 'var(--ifm-color-emphasis-100)',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{
              display: 'inline-block',
              width: '40px',
              height: '40px',
              border: '4px solid var(--ifm-color-primary-lightest)',
              borderTopColor: 'var(--ifm-color-primary)',
              borderRadius: '50%',
              animation: reducedMotion ? 'none' : 'spin 1s linear infinite',
            }}
          />
          <div style={{ marginTop: '12px', fontSize: '14px' }}>
            {reducedMotion ? 'åŠ è½½ä¸­ï¼ˆé™æ€ï¼‰' : 'åŠ è½½ä¸­ï¼ˆæ—‹è½¬åŠ¨ç”»ï¼‰'}
          </div>
        </div>
      )}
      <style>{`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `}</style>
    </div>
  );
}
```

## API

### å‚æ•°

```ts
function useReducedMotion(): boolean
```

æ— å‚æ•°ã€‚

### è¿”å›å€¼

è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç”¨æˆ·æ˜¯å¦å¯ç”¨äº†"å‡å°‘åŠ¨ç”»"åå¥½ã€‚

```ts
boolean
```

- `true`: ç”¨æˆ·å¯ç”¨äº†å‡å°‘åŠ¨ç”»
- `false`: ç”¨æˆ·å…è®¸æ­£å¸¸åŠ¨ç”»

## å·¥ä½œåŸç†

é€šè¿‡åª’ä½“æŸ¥è¯¢ `prefers-reduced-motion` æ£€æµ‹ç”¨æˆ·ç³»ç»Ÿåå¥½è®¾ç½®ï¼š

```css
@media (prefers-reduced-motion: reduce) {
  /* ç”¨æˆ·å¯ç”¨äº†å‡å°‘åŠ¨ç”» */
}
```

## ç‰¹æ€§

- **å¯è®¿é—®æ€§**: å°Šé‡ç”¨æˆ·çš„æ— éšœç¢åå¥½
- **è‡ªåŠ¨å“åº”**: ç”¨æˆ·æ›´æ”¹è®¾ç½®æ—¶è‡ªåŠ¨æ›´æ–°
- **é›¶é…ç½®**: æ— éœ€é¢å¤–é…ç½®å³å¯ä½¿ç”¨
- **æ€§èƒ½å‹å¥½**: å¯¹äºå¯ç”¨å‡å°‘åŠ¨ç”»çš„ç”¨æˆ·ï¼Œå¯ä»¥æå‡æ€§èƒ½

## è®¾ç½®æ–¹æ³•

### macOS
ç³»ç»Ÿåå¥½è®¾ç½® â†’ è¾…åŠ©åŠŸèƒ½ â†’ æ˜¾ç¤º â†’ å‡å°‘åŠ¨æ€æ•ˆæœ

### Windows
è®¾ç½® â†’ è½»æ¾ä½¿ç”¨ â†’ æ˜¾ç¤º â†’ åœ¨ Windows ä¸­æ˜¾ç¤ºåŠ¨ç”»

### iOS
è®¾ç½® â†’ è¾…åŠ©åŠŸèƒ½ â†’ åŠ¨æ€æ•ˆæœ â†’ å‡å°‘åŠ¨æ€æ•ˆæœ

### Android
è®¾ç½® â†’ è¾…åŠ©åŠŸèƒ½ â†’ ç§»é™¤åŠ¨ç”»

## ä½¿ç”¨åœºæ™¯

- **è¿‡æ¸¡åŠ¨ç”»**: æ ¹æ®åå¥½ç¦ç”¨æˆ–å‡å°‘è¿‡æ¸¡æ•ˆæœ
- **åŠ è½½åŠ¨ç”»**: æä¾›é™æ€æ›¿ä»£æ–¹æ¡ˆ
- **è§†å·®æ•ˆæœ**: ç¦ç”¨å¯èƒ½å¼•èµ·ä¸é€‚çš„æ»šåŠ¨æ•ˆæœ
- **è‡ªåŠ¨æ’­æ”¾**: åœæ­¢è‡ªåŠ¨è½®æ’­å’Œè§†é¢‘æ’­æ”¾
- **æ‚¬åœæ•ˆæœ**: ç®€åŒ–æˆ–ç§»é™¤å¤æ‚çš„æ‚¬åœåŠ¨ç”»
- **é¡µé¢åˆ‡æ¢**: ä½¿ç”¨å³æ—¶åˆ‡æ¢æ›¿ä»£æ·¡å…¥æ·¡å‡º

## æœ€ä½³å®è·µ

### æ¸è¿›å¢å¼º

```jsx
const reducedMotion = useReducedMotion();

const animationProps = reducedMotion
  ? {}
  : {
      initial: { opacity: 0, y: 20 },
      animate: { opacity: 1, y: 0 },
      transition: { duration: 0.3 },
    };

return <motion.div {...animationProps}>å†…å®¹</motion.div>;
```

### CSS-in-JS é›†æˆ

```jsx
const reducedMotion = useReducedMotion();

const styles = {
  transition: reducedMotion ? 'none' : 'all 0.3s ease',
  animation: reducedMotion ? 'none' : 'fadeIn 0.5s',
};
```

### åŠ¨ç”»åº“é…ç½®

```jsx
// Framer Motion
const reducedMotion = useReducedMotion();

<MotionConfig reducedMotion={reducedMotion ? 'always' : 'never'}>
  {/* ç»„ä»¶æ ‘ */}
</MotionConfig>
```

## æ³¨æ„äº‹é¡¹

- ä¸æ˜¯æ‰€æœ‰åŠ¨ç”»éƒ½è¦ç¦ç”¨ï¼Œåªç¦ç”¨å¯èƒ½å¼•èµ·ä¸é€‚çš„åŠ¨ç”»
- ä¿ç•™å¿…è¦çš„çŠ¶æ€åé¦ˆåŠ¨ç”»
- è€ƒè™‘æä¾›é™æ€æ›¿ä»£æ–¹æ¡ˆ
- æµ‹è¯•åœ¨å¯ç”¨å‡å°‘åŠ¨ç”»æ—¶çš„ç”¨æˆ·ä½“éªŒ
- æŸäº›åŠŸèƒ½æ€§åŠ¨ç”»ï¼ˆå¦‚è¿›åº¦æ¡ï¼‰å¯ä»¥ä¿ç•™

## å¯è®¿é—®æ€§

éµå¾ª WCAG 2.1 å‡†åˆ™ï¼š
- **Success Criterion 2.3.3**: åŠ¨ç”»æ¥è‡ªäº¤äº’ï¼ˆAAA çº§ï¼‰
- å°Šé‡ç”¨æˆ·çš„ç³»ç»Ÿåå¥½
- æä¾›æ— åŠ¨ç”»çš„å¯ç”¨ä½“éªŒ
