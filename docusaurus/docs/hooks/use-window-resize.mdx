---
sidebar_position: 16
---

# useWindowResize

ç›‘å¬çª—å£å¤§å°å˜åŒ–çš„ Hookã€‚

## åŸºæœ¬ç”¨æ³•

```jsx live
function Demo() {
  const [size, setSize] = useState({ width: 0, height: 0 });

  useWindowResize(() => {
    setSize({
      width: window.innerWidth,
      height: window.innerHeight,
    });
  });

  return (
    <div>
      <div
        style={{
          padding: '24px',
          backgroundColor: 'var(--ifm-color-emphasis-100)',
          borderRadius: '8px',
          textAlign: 'center',
        }}
      >
        <div style={{ fontSize: '48px', marginBottom: '16px' }}>ğŸ“</div>
        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px' }}>
          <div
            style={{
              padding: '16px',
              backgroundColor: 'var(--ifm-background-surface-color)',
              borderRadius: '6px',
            }}
          >
            <div style={{ fontSize: '32px', fontWeight: 'bold', color: 'var(--ifm-color-primary)' }}>
              {size.width}
            </div>
            <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
              å®½åº¦ (px)
            </div>
          </div>
          <div
            style={{
              padding: '16px',
              backgroundColor: 'var(--ifm-background-surface-color)',
              borderRadius: '6px',
            }}
          >
            <div style={{ fontSize: '32px', fontWeight: 'bold', color: 'var(--ifm-color-primary)' }}>
              {size.height}
            </div>
            <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
              é«˜åº¦ (px)
            </div>
          </div>
        </div>
        <div style={{ marginTop: '12px', fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
          è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æŸ¥çœ‹å˜åŒ–
        </div>
      </div>
    </div>
  );
}
```

## å“åº”å¼å¸ƒå±€

æ ¹æ®çª—å£å¤§å°åˆ‡æ¢å¸ƒå±€ï¼š

```jsx live
function Demo() {
  const [layout, setLayout] = useState('desktop');

  useWindowResize(() => {
    const width = window.innerWidth;
    if (width < 768) {
      setLayout('mobile');
    } else if (width < 1024) {
      setLayout('tablet');
    } else {
      setLayout('desktop');
    }
  });

  const layoutConfig = {
    mobile: { icon: 'ğŸ“±', name: 'ç§»åŠ¨ç«¯', color: 'var(--ifm-color-primary)' },
    tablet: { icon: 'ğŸ“²', name: 'å¹³æ¿', color: 'var(--ifm-color-success)' },
    desktop: { icon: 'ğŸ–¥ï¸', name: 'æ¡Œé¢ç«¯', color: 'var(--ifm-color-info)' },
  };

  const config = layoutConfig[layout];

  return (
    <div
      style={{
        padding: '24px',
        backgroundColor: 'var(--ifm-color-emphasis-100)',
        borderRadius: '8px',
        textAlign: 'center',
      }}
    >
      <div style={{ fontSize: '64px', marginBottom: '12px' }}>{config.icon}</div>
      <div style={{ fontSize: '24px', fontWeight: 'bold', marginBottom: '8px', color: config.color }}>
        {config.name}
      </div>
      <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
        å½“å‰å¸ƒå±€ç±»å‹
      </div>
    </div>
  );
}
```

## ä¾§è¾¹æ è‡ªåŠ¨æ”¶èµ·

å°å±å¹•æ—¶è‡ªåŠ¨æ”¶èµ·ä¾§è¾¹æ ï¼š

```jsx live
function Demo() {
  const [sidebarOpen, setSidebarOpen] = useState(true);

  useWindowResize(() => {
    if (window.innerWidth < 1024) {
      setSidebarOpen(false);
    } else {
      setSidebarOpen(true);
    }
  });

  return (
    <div>
      <Button onClick={() => setSidebarOpen(!sidebarOpen)} style={{ marginBottom: '12px' }}>
        {sidebarOpen ? 'æ”¶èµ·' : 'å±•å¼€'} ä¾§è¾¹æ 
      </Button>
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: sidebarOpen ? '200px 1fr' : '1fr',
          gap: '12px',
          minHeight: '200px',
        }}
      >
        {sidebarOpen && (
          <div
            style={{
              padding: '16px',
              backgroundColor: 'var(--ifm-color-emphasis-100)',
              borderRadius: '8px',
            }}
          >
            <div style={{ fontWeight: 'bold', marginBottom: '12px' }}>ä¾§è¾¹æ </div>
            <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
              å¯¼èˆªèœå•é¡¹...
            </div>
          </div>
        )}
        <div
          style={{
            padding: '16px',
            backgroundColor: 'var(--ifm-background-surface-color)',
            border: '1px solid var(--ifm-color-emphasis-300)',
            borderRadius: '8px',
          }}
        >
          <div style={{ fontWeight: 'bold', marginBottom: '8px' }}>ä¸»å†…å®¹åŒº</div>
          <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
            çª—å£å®½åº¦å°äº 1024px æ—¶ï¼Œä¾§è¾¹æ ä¼šè‡ªåŠ¨æ”¶èµ·
          </div>
        </div>
      </div>
    </div>
  );
}
```

## è®¡ç®—ç½‘æ ¼åˆ—æ•°

æ ¹æ®çª—å£å®½åº¦åŠ¨æ€è°ƒæ•´ç½‘æ ¼åˆ—æ•°ï¼š

```jsx live
function Demo() {
  const [columns, setColumns] = useState(4);

  useWindowResize(() => {
    const width = window.innerWidth;
    if (width < 640) setColumns(1);
    else if (width < 768) setColumns(2);
    else if (width < 1024) setColumns(3);
    else setColumns(4);
  });

  return (
    <div>
      <div
        style={{
          marginBottom: '12px',
          padding: '12px',
          backgroundColor: 'var(--ifm-color-primary-lightest)',
          borderRadius: '6px',
          textAlign: 'center',
        }}
      >
        å½“å‰åˆ—æ•°: <strong>{columns}</strong>
      </div>
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: `repeat(${columns}, 1fr)`,
          gap: '12px',
        }}
      >
        {Array.from({ length: 8 }, (_, i) => (
          <div
            key={i}
            style={{
              padding: '20px',
              backgroundColor: 'var(--ifm-color-emphasis-100)',
              borderRadius: '6px',
              textAlign: 'center',
            }}
          >
            {i + 1}
          </div>
        ))}
      </div>
    </div>
  );
}
```

## API

### å‚æ•°

```ts
function useWindowResize(
  callback: () => void
): void
```

| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|------|--------|
| callback | çª—å£å¤§å°å˜åŒ–æ—¶çš„å›è°ƒå‡½æ•° | `() => void` | - |

### è¿”å›å€¼

æ— è¿”å›å€¼ã€‚

## ç‰¹æ€§

- **è‡ªåŠ¨æ¸…ç†**: ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨ç§»é™¤ç›‘å¬å™¨
- **æ€§èƒ½ä¼˜åŒ–**: å†…éƒ¨å·²åšé˜²æŠ–å¤„ç†
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript æ”¯æŒ

## ä¸ useWindowEvent çš„åŒºåˆ«

| ç‰¹æ€§ | useWindowResize | useWindowEvent |
|------|----------------|----------------|
| äº‹ä»¶ç±»å‹ | ä»… resize | ä»»æ„çª—å£äº‹ä»¶ |
| ä½¿ç”¨ä¾¿æ·æ€§ | âœ… ä¸“é—¨ä¼˜åŒ– | éœ€æŒ‡å®šäº‹ä»¶ç±»å‹ |
| æ€§èƒ½ | å†…ç½®é˜²æŠ– | éœ€æ‰‹åŠ¨å¤„ç† |

```jsx
// useWindowResize - æ¨èç”¨äºçª—å£å¤§å°ç›‘å¬
useWindowResize(() => {
  console.log('resized');
});

// useWindowEvent - æ›´é€šç”¨
useWindowEvent('resize', () => {
  console.log('resized');
});
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### ä½¿ç”¨é˜²æŠ–

è™½ç„¶ `useWindowResize` å†…éƒ¨å·²æœ‰ä¼˜åŒ–ï¼Œä½†å¯¹äºå¤æ‚è®¡ç®—ï¼Œå»ºè®®ç»“åˆ `useDebouncedValue`ï¼š

```jsx
function Demo() {
  const [size, setSize] = useState({ width: 0, height: 0 });
  const [debouncedSize] = useDebouncedValue(size, 300);

  useWindowResize(() => {
    setSize({
      width: window.innerWidth,
      height: window.innerHeight,
    });
  });

  // ä½¿ç”¨ debouncedSize è¿›è¡Œå¤æ‚è®¡ç®—
}
```

### é¿å…é¢‘ç¹æ¸²æŸ“

åªåœ¨å¿…è¦æ—¶æ›´æ–°çŠ¶æ€ï¼š

```jsx
// âŒ ä¸æ¨è - æ¯æ¬¡ resize éƒ½æ›´æ–°
useWindowResize(() => {
  setWidth(window.innerWidth);
});

// âœ… æ¨è - åªåœ¨è·¨è¶Šé˜ˆå€¼æ—¶æ›´æ–°
useWindowResize(() => {
  const width = window.innerWidth;
  const newIsMobile = width < 768;
  if (newIsMobile !== isMobile) {
    setIsMobile(newIsMobile);
  }
});
```

## ä½¿ç”¨åœºæ™¯

- **å“åº”å¼å¸ƒå±€**: æ ¹æ®å±å¹•å¤§å°è°ƒæ•´å¸ƒå±€
- **ä¾§è¾¹æ æ§åˆ¶**: å°å±å¹•è‡ªåŠ¨æ”¶èµ·ä¾§è¾¹æ 
- **ç½‘æ ¼ç³»ç»Ÿ**: åŠ¨æ€è°ƒæ•´åˆ—æ•°
- **å›¾è¡¨é€‚é…**: é‡æ–°è®¡ç®—å›¾è¡¨å°ºå¯¸
- **è™šæ‹Ÿåˆ—è¡¨**: æ›´æ–°å¯è§†åŒºåŸŸå¤§å°
- **å·¥å…·æç¤º**: è°ƒæ•´æç¤ºä½ç½®é¿å…æº¢å‡º

## æ³¨æ„äº‹é¡¹

- å›è°ƒå‡½æ•°åº”è¯¥å°½é‡è½»é‡ï¼Œé¿å…å¤æ‚è®¡ç®—
- è€ƒè™‘ä½¿ç”¨é˜²æŠ–å‡å°‘ä¸å¿…è¦çš„æ›´æ–°
- åœ¨å›è°ƒä¸­è®¿é—® DOM æ—¶æ³¨æ„æ€§èƒ½
- ä¸è¦åœ¨å›è°ƒä¸­è¿›è¡Œå¤§é‡çŠ¶æ€æ›´æ–°
