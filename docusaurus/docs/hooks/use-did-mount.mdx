---
sidebar_position: 9
---

# useDidMount

ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œå›è°ƒçš„ Hookï¼Œç›¸å½“äº class ç»„ä»¶çš„ `componentDidMount`ã€‚

## åŸºæœ¬ç”¨æ³•

```jsx live
function Demo() {
  const [message, setMessage] = useState('');

  useDidMount(() => {
    setMessage('ç»„ä»¶å·²æŒ‚è½½ï¼');
  });

  return (
    <div
      style={{
        padding: '24px',
        backgroundColor: 'var(--ifm-color-success-lightest)',
        borderRadius: '8px',
        border: '1px solid var(--ifm-color-success)',
      }}
    >
      {message || 'ç­‰å¾…æŒ‚è½½...'}
    </div>
  );
}
```

## è·å–æ•°æ®

ç»„ä»¶æŒ‚è½½æ—¶è·å–æ•°æ®ï¼š

```jsx live
function Demo() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useDidMount(() => {
    // æ¨¡æ‹Ÿ API è¯·æ±‚
    setTimeout(() => {
      setData({ title: 'æ–‡ç« æ ‡é¢˜', content: 'è¿™æ˜¯æ–‡ç« å†…å®¹' });
      setLoading(false);
    }, 1000);
  });

  if (loading) {
    return <Loading />;
  }

  return (
    <div
      style={{
        padding: '20px',
        backgroundColor: 'var(--ifm-background-surface-color)',
        border: '1px solid var(--ifm-color-emphasis-300)',
        borderRadius: '8px',
      }}
    >
      <h4>{data.title}</h4>
      <p>{data.content}</p>
    </div>
  );
}
```

## åˆå§‹åŒ–

æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘ï¼š

```jsx live
function Demo() {
  const [initialized, setInitialized] = useState(false);
  const [config, setConfig] = useState(null);

  useDidMount(() => {
    // åˆå§‹åŒ–é…ç½®
    const savedConfig = localStorage.getItem('demo-config') || '{"theme":"light","language":"zh"}';
    setConfig(JSON.parse(savedConfig));
    setInitialized(true);
  });

  if (!initialized) {
    return <div>åˆå§‹åŒ–ä¸­...</div>;
  }

  return (
    <div
      style={{
        padding: '20px',
        backgroundColor: 'var(--ifm-color-emphasis-100)',
        borderRadius: '8px',
      }}
    >
      <h4>é…ç½®å·²åŠ è½½</h4>
      <div>ä¸»é¢˜: {config.theme}</div>
      <div>è¯­è¨€: {config.language}</div>
    </div>
  );
}
```

## è®¢é˜…äº‹ä»¶

ç»„ä»¶æŒ‚è½½æ—¶è®¢é˜…äº‹ä»¶ï¼š

```jsx live
function Demo() {
  const [online, setOnline] = useState(navigator.onLine);

  useDidMount(() => {
    const handleOnline = () => setOnline(true);
    const handleOffline = () => setOnline(false);

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    // è¿”å›æ¸…ç†å‡½æ•°
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  });

  return (
    <div
      style={{
        padding: '20px',
        backgroundColor: online ? 'var(--ifm-color-success-lightest)' : 'var(--ifm-color-danger-lightest)',
        borderRadius: '8px',
        textAlign: 'center',
      }}
    >
      <div style={{ fontSize: '32px', marginBottom: '12px' }}>
        {online ? 'ğŸŸ¢' : 'ğŸ”´'}
      </div>
      <div>ç½‘ç»œçŠ¶æ€: {online ? 'åœ¨çº¿' : 'ç¦»çº¿'}</div>
    </div>
  );
}
```

## API

### å‚æ•°

```ts
function useDidMount(callback: () => any): void
```

| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|------|--------|
| callback | ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•° | `() => any` | - |

å›è°ƒå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œä¼šåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚

### è¿”å›å€¼

æ— è¿”å›å€¼ã€‚

## æ³¨æ„äº‹é¡¹

- åªåœ¨ç»„ä»¶é¦–æ¬¡æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡
- å›è°ƒå¯ä»¥è¿”å›æ¸…ç†å‡½æ•°ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œ
- ç›¸å½“äº `useEffect(() => { ... }, [])`
- ä¸è¦åœ¨å›è°ƒä¸­ç›´æ¥ä¿®æ”¹ä¾èµ–å€¼

## ä½¿ç”¨åœºæ™¯

- **æ•°æ®è·å–**: ç»„ä»¶æŒ‚è½½æ—¶è·å–åˆå§‹æ•°æ®
- **äº‹ä»¶è®¢é˜…**: è®¢é˜…å…¨å±€äº‹ä»¶æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡
- **åˆå§‹åŒ–**: æ‰§è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–é€»è¾‘
- **å®šæ—¶å™¨**: å¯åŠ¨å®šæ—¶å™¨æˆ–è½®è¯¢
- **æ—¥å¿—è®°å½•**: è®°å½•ç»„ä»¶æŒ‚è½½äº‹ä»¶
