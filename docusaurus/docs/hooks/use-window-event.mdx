---
sidebar_position: 14
---

# useWindowEvent

ç®¡ç† window äº‹ä»¶ç›‘å¬çš„ Hookã€‚

## åŸºæœ¬ç”¨æ³•

```jsx live
function Demo() {
  const [scrollY, setScrollY] = useState(0);

  useWindowEvent('scroll', () => {
    setScrollY(window.scrollY);
  });

  return (
    <div
      style={{
        padding: '20px',
        backgroundColor: 'var(--ifm-color-emphasis-100)',
        borderRadius: '8px',
        textAlign: 'center',
      }}
    >
      <div style={{ fontSize: '32px', fontWeight: 'bold', color: 'var(--ifm-color-primary)' }}>
        {Math.round(scrollY)}px
      </div>
      <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
        æ»šåŠ¨è·ç¦»
      </div>
    </div>
  );
}
```

## çª—å£å¤§å°ç›‘å¬

ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼š

```jsx live
function Demo() {
  const [size, setSize] = useState({
    width: typeof window !== 'undefined' ? window.innerWidth : 0,
    height: typeof window !== 'undefined' ? window.innerHeight : 0,
  });

  useWindowEvent('resize', () => {
    setSize({
      width: window.innerWidth,
      height: window.innerHeight,
    });
  });

  return (
    <div
      style={{
        padding: '20px',
        backgroundColor: 'var(--ifm-background-surface-color)',
        border: '1px solid var(--ifm-color-emphasis-300)',
        borderRadius: '8px',
      }}
    >
      <h4>çª—å£å°ºå¯¸</h4>
      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
        <div
          style={{
            padding: '16px',
            backgroundColor: 'var(--ifm-color-primary-lightest)',
            borderRadius: '6px',
            textAlign: 'center',
          }}
        >
          <div style={{ fontSize: '24px', fontWeight: 'bold' }}>{size.width}</div>
          <div style={{ fontSize: '14px' }}>å®½åº¦ (px)</div>
        </div>
        <div
          style={{
            padding: '16px',
            backgroundColor: 'var(--ifm-color-primary-lightest)',
            borderRadius: '6px',
            textAlign: 'center',
          }}
        >
          <div style={{ fontSize: '24px', fontWeight: 'bold' }}>{size.height}</div>
          <div style={{ fontSize: '14px' }}>é«˜åº¦ (px)</div>
        </div>
      </div>
      <p style={{ marginTop: '12px', fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
        è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æŸ¥çœ‹å˜åŒ–
      </p>
    </div>
  );
}
```

## é”®ç›˜äº‹ä»¶

ç›‘å¬å…¨å±€é”®ç›˜äº‹ä»¶ï¼š

```jsx live
function Demo() {
  const [lastKey, setLastKey] = useState('');
  const [log, setLog] = useState([]);

  useWindowEvent('keydown', (event) => {
    const key = event.key;
    setLastKey(key);
    setLog((prev) => [...prev.slice(-4), key]);
  });

  return (
    <div>
      <div
        style={{
          padding: '24px',
          backgroundColor: 'var(--ifm-color-emphasis-100)',
          borderRadius: '8px',
          marginBottom: '12px',
          textAlign: 'center',
        }}
      >
        <div style={{ fontSize: '48px', marginBottom: '12px' }}>âŒ¨ï¸</div>
        <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
          æŒ‰ä¸‹ä»»æ„é”®
        </div>
        {lastKey && (
          <div
            style={{
              marginTop: '12px',
              fontSize: '32px',
              fontWeight: 'bold',
              color: 'var(--ifm-color-primary)',
            }}
          >
            {lastKey}
          </div>
        )}
      </div>
      {log.length > 0 && (
        <div
          style={{
            padding: '12px',
            backgroundColor: 'var(--ifm-color-emphasis-100)',
            borderRadius: '6px',
            fontSize: '14px',
          }}
        >
          <strong>æœ€è¿‘æŒ‰é”®:</strong> {log.join(' â†’ ')}
        </div>
      )}
    </div>
  );
}
```

## åœ¨çº¿çŠ¶æ€

ç›‘å¬ç½‘ç»œè¿æ¥çŠ¶æ€ï¼š

```jsx live
function Demo() {
  const [online, setOnline] = useState(navigator.onLine);

  useWindowEvent('online', () => setOnline(true));
  useWindowEvent('offline', () => setOnline(false));

  return (
    <div
      style={{
        padding: '24px',
        backgroundColor: online ? 'var(--ifm-color-success-lightest)' : 'var(--ifm-color-danger-lightest)',
        borderRadius: '8px',
        textAlign: 'center',
      }}
    >
      <div style={{ fontSize: '48px', marginBottom: '12px' }}>
        {online ? 'ğŸŸ¢' : 'ğŸ”´'}
      </div>
      <div style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '8px' }}>
        {online ? 'åœ¨çº¿' : 'ç¦»çº¿'}
      </div>
      <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)' }}>
        {online ? 'ç½‘ç»œè¿æ¥æ­£å¸¸' : 'ç½‘ç»œè¿æ¥å·²æ–­å¼€'}
      </div>
    </div>
  );
}
```

## API

### å‚æ•°

```ts
function useWindowEvent<K extends keyof WindowEventMap>(
  type: K,
  listener: (this: Window, ev: WindowEventMap[K]) => any,
  options?: boolean | AddEventListenerOptions
): void
```

| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|------|--------|
| type | äº‹ä»¶ç±»å‹ | `keyof WindowEventMap` | - |
| listener | äº‹ä»¶å¤„ç†å‡½æ•° | `(event) => void` | - |
| options | äº‹ä»¶ç›‘å¬é€‰é¡¹ | `boolean \| AddEventListenerOptions` | - |

### è¿”å›å€¼

æ— è¿”å›å€¼ã€‚

## å¸¸ç”¨äº‹ä»¶ç±»å‹

### çª—å£äº‹ä»¶
- `resize` - çª—å£å¤§å°å˜åŒ–
- `scroll` - æ»šåŠ¨äº‹ä»¶
- `focus` - çª—å£è·å¾—ç„¦ç‚¹
- `blur` - çª—å£å¤±å»ç„¦ç‚¹

### é”®ç›˜äº‹ä»¶
- `keydown` - æŒ‰é”®æŒ‰ä¸‹
- `keyup` - æŒ‰é”®é‡Šæ”¾
- `keypress` - æŒ‰é”®æŒ‰ä¸‹å¹¶é‡Šæ”¾

### é¼ æ ‡äº‹ä»¶
- `mousemove` - é¼ æ ‡ç§»åŠ¨
- `mousedown` - é¼ æ ‡æŒ‰ä¸‹
- `mouseup` - é¼ æ ‡é‡Šæ”¾
- `click` - ç‚¹å‡»

### ç½‘ç»œäº‹ä»¶
- `online` - ç½‘ç»œè¿æ¥
- `offline` - ï¿½ï¿½ï¿½ç»œæ–­å¼€

### å…¶ä»–äº‹ä»¶
- `beforeunload` - é¡µé¢å¸è½½å‰
- `hashchange` - URL hash å˜åŒ–
- `popstate` - å†å²è®°å½•å˜åŒ–
- `storage` - localStorage å˜åŒ–
- `visibilitychange` - é¡µé¢å¯è§æ€§å˜åŒ–

## ç‰¹æ€§

- **è‡ªåŠ¨æ¸…ç†**: ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨ç§»é™¤ç›‘å¬å™¨
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
- **ç®€æ´ API**: æ— éœ€æ‰‹åŠ¨ç®¡ç† addEventListener/removeEventListener

## ä½¿ç”¨åœºæ™¯

- **å“åº”å¼å¸ƒå±€**: ç›‘å¬çª—å£å¤§å°å˜åŒ–
- **æ»šåŠ¨æ•ˆæœ**: å®ç°æ»šåŠ¨ç›¸å…³åŠŸèƒ½
- **é”®ç›˜å¿«æ·é”®**: å…¨å±€å¿«æ·é”®ç›‘å¬
- **ç½‘ç»œçŠ¶æ€**: ç›‘æµ‹ç½‘ç»œè¿æ¥
- **é¡µé¢å¯è§æ€§**: æ£€æµ‹æ ‡ç­¾é¡µåˆ‡æ¢
