---
sidebar_position: 18
---

# useScrollLock

é”å®šå’Œè§£é”é¡µé¢æ»šåŠ¨çš„ Hookï¼Œå¸¸ç”¨äºæ¨¡æ€æ¡†å’ŒæŠ½å±‰ç»„ä»¶ã€‚

## åŸºæœ¬ç”¨æ³•

```jsx live
function Demo() {
  const [lockScroll, setLockScroll] = useState(false);
  useScrollLock(lockScroll);

  return (
    <div>
      <Button onClick={() => setLockScroll(!lockScroll)}>
        {lockScroll ? 'è§£é”æ»šåŠ¨' : 'é”å®šæ»šåŠ¨'}
      </Button>
      <div
        style={{
          marginTop: '12px',
          padding: '16px',
          backgroundColor: lockScroll ? 'var(--ifm-color-warning-lightest)' : 'var(--ifm-color-success-lightest)',
          borderRadius: '8px',
        }}
      >
        <div style={{ fontWeight: 'bold', marginBottom: '8px' }}>
          {lockScroll ? 'ğŸ”’ æ»šåŠ¨å·²é”å®š' : 'ğŸ”“ æ»šåŠ¨å·²è§£é”'}
        </div>
        <div style={{ fontSize: '14px' }}>
          {lockScroll ? 'é¡µé¢èƒŒæ™¯æ— æ³•æ»šåŠ¨' : 'é¡µé¢å¯ä»¥æ­£å¸¸æ»šåŠ¨'}
        </div>
      </div>
    </div>
  );
}
```

## æ¨¡æ€æ¡†ç¤ºä¾‹

æ‰“å¼€æ¨¡æ€æ¡†æ—¶é”å®šèƒŒæ™¯æ»šåŠ¨ï¼š

```jsx live
function Demo() {
  const [opened, setOpened] = useState(false);
  useScrollLock(opened);

  return (
    <div>
      <Button onClick={() => setOpened(true)}>æ‰“å¼€æ¨¡æ€æ¡†</Button>
      {opened && (
        <>
          <div
            style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              backgroundColor: 'rgba(0, 0, 0, 0.5)',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              zIndex: 1000,
            }}
            onClick={() => setOpened(false)}
          >
            <div
              style={{
                backgroundColor: 'var(--ifm-background-surface-color)',
                padding: '32px',
                borderRadius: '8px',
                maxWidth: '500px',
                maxHeight: '80vh',
                overflow: 'auto',
              }}
              onClick={(e) => e.stopPropagation()}
            >
              <h3>æ¨¡æ€æ¡†æ ‡é¢˜</h3>
              <p>è¿™æ˜¯ä¸€ä¸ªæ¨¡æ€æ¡†ã€‚èƒŒæ™¯æ»šåŠ¨å·²è¢«é”å®šã€‚</p>
              <p>ä½ å¯ä»¥åœ¨è¿™ä¸ªæ¨¡æ€æ¡†å†…æ»šåŠ¨ï¼Œä½†èƒŒæ™¯é¡µé¢ä¸ä¼šæ»šåŠ¨ã€‚</p>
              {Array.from({ length: 10 }, (_, i) => (
                <p key={i}>æ¨¡æ€æ¡†å†…å®¹è¡Œ {i + 1}</p>
              ))}
              <Button onClick={() => setOpened(false)}>å…³é—­</Button>
            </div>
          </div>
        </>
      )}
    </div>
  );
}
```

## ä¾§è¾¹æŠ½å±‰

æŠ½å±‰æ‰“å¼€æ—¶é”å®šæ»šåŠ¨ï¼š

```jsx live
function Demo() {
  const [drawerOpen, setDrawerOpen] = useState(false);
  useScrollLock(drawerOpen);

  return (
    <div>
      <Button onClick={() => setDrawerOpen(true)}>æ‰“å¼€ä¾§è¾¹æ </Button>
      {drawerOpen && (
        <>
          <div
            style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              backgroundColor: 'rgba(0, 0, 0, 0.3)',
              zIndex: 1000,
            }}
            onClick={() => setDrawerOpen(false)}
          />
          <div
            style={{
              position: 'fixed',
              top: 0,
              right: 0,
              bottom: 0,
              width: '300px',
              backgroundColor: 'var(--ifm-background-surface-color)',
              boxShadow: '-2px 0 8px rgba(0, 0, 0, 0.1)',
              padding: '24px',
              overflowY: 'auto',
              zIndex: 1001,
            }}
          >
            <h3>ä¾§è¾¹æ </h3>
            <p>èƒŒæ™¯æ»šåŠ¨å·²é”å®š</p>
            {Array.from({ length: 20 }, (_, i) => (
              <div key={i} style={{ padding: '8px 0' }}>
                èœå•é¡¹ {i + 1}
              </div>
            ))}
            <Button onClick={() => setDrawerOpen(false)}>å…³é—­</Button>
          </div>
        </>
      )}
    </div>
  );
}
```

## æ¡ä»¶é”å®š

æ ¹æ®æ¡ä»¶åŠ¨æ€æ§åˆ¶æ»šåŠ¨é”å®šï¼š

```jsx live
function Demo() {
  const [menuOpen, setMenuOpen] = useState(false);
  const [modalOpen, setModalOpen] = useState(false);

  // ä»»ä¸€å¼¹çª—æ‰“å¼€æ—¶é”å®šæ»šåŠ¨
  const shouldLock = menuOpen || modalOpen;
  useScrollLock(shouldLock);

  return (
    <div>
      <Group spacing="md">
        <Button onClick={() => setMenuOpen(!menuOpen)}>
          {menuOpen ? 'å…³é—­' : 'æ‰“å¼€'} èœå•
        </Button>
        <Button onClick={() => setModalOpen(!modalOpen)}>
          {modalOpen ? 'å…³é—­' : 'æ‰“å¼€'} å¯¹è¯æ¡†
        </Button>
      </Group>
      <div
        style={{
          marginTop: '16px',
          padding: '16px',
          backgroundColor: 'var(--ifm-color-emphasis-100)',
          borderRadius: '8px',
        }}
      >
        <div>æ»šåŠ¨çŠ¶æ€: {shouldLock ? 'ğŸ”’ å·²é”å®š' : 'ğŸ”“ æœªé”å®š'}</div>
        <div style={{ fontSize: '14px', color: 'var(--ifm-color-emphasis-700)', marginTop: '4px' }}>
          èœå•: {menuOpen ? 'æ‰“å¼€' : 'å…³é—­'} | å¯¹è¯æ¡†: {modalOpen ? 'æ‰“å¼€' : 'å…³é—­'}
        </div>
      </div>
    </div>
  );
}
```

## API

### å‚æ•°

```ts
function useScrollLock(lock: boolean): void
```

| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|------|--------|
| lock | æ˜¯å¦é”å®šæ»šåŠ¨ | `boolean` | - |

### è¿”å›å€¼

æ— è¿”å›å€¼ã€‚

## å·¥ä½œåŸç†

å½“æ»šåŠ¨è¢«é”å®šæ—¶ï¼š
1. ä¿å­˜å½“å‰æ»šåŠ¨ä½ç½®
2. åœ¨ `body` å…ƒç´ ä¸Šæ·»åŠ  `overflow: hidden`
3. è®¾ç½®å›ºå®šå®šä½é˜²æ­¢å¸ƒå±€è·³åŠ¨
4. æ¢å¤æ—¶ç§»é™¤æ ·å¼å¹¶è¿˜åŸæ»šåŠ¨ä½ç½®

## ç‰¹æ€§

- **è‡ªåŠ¨æ¸…ç†**: ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨è§£é”
- **é˜²æ­¢è·³åŠ¨**: ä¿æŒæ»šåŠ¨æ¡å®½åº¦ï¼Œé¿å…å¸ƒå±€åç§»
- **åµŒå¥—æ”¯æŒ**: æ”¯æŒå¤šä¸ªç»„ä»¶åŒæ—¶ä½¿ç”¨
- **ä½ç½®ä¿æŒ**: è§£é”åæ¢å¤åŸæ»šåŠ¨ä½ç½®

## æ³¨æ„äº‹é¡¹

- é”å®šæ»šåŠ¨ä¼šå½±å“æ•´ä¸ªé¡µé¢
- ç¡®ä¿åœ¨ç»„ä»¶å¸è½½æ—¶è§£é”æ»šåŠ¨
- æ¨¡æ€æ¡†å†…å®¹åŒºåŸŸåº”è¯¥ç‹¬ç«‹å¯æ»šåŠ¨
- æ³¨æ„ç§»åŠ¨ç«¯çš„å…¼å®¹æ€§å¤„ç†

## ä½¿ç”¨åœºæ™¯

- **æ¨¡æ€æ¡†**: æ‰“å¼€æ¨¡æ€æ¡†æ—¶é”å®šèƒŒæ™¯
- **æŠ½å±‰**: ä¾§è¾¹æ æŠ½å±‰ç»„ä»¶
- **å…¨å±èœå•**: ç§»åŠ¨ç«¯å…¨å±å¯¼èˆªèœå•
- **å›¾ç‰‡é¢„è§ˆ**: å…¨å±å›¾ç‰‡æŸ¥çœ‹å™¨
- **è§†é¢‘æ’­æ”¾å™¨**: å…¨å±è§†é¢‘æ’­æ”¾
- **å¼•å¯¼æµç¨‹**: ç”¨æˆ·å¼•å¯¼é®ç½©å±‚

## æ›¿ä»£æ–¹æ¡ˆ

### ä½¿ç”¨ CSS ç±»

```jsx
// âŒ æ‰‹åŠ¨ç®¡ç†
useEffect(() => {
  if (opened) {
    document.body.style.overflow = 'hidden';
  } else {
    document.body.style.overflow = '';
  }
  return () => {
    document.body.style.overflow = '';
  };
}, [opened]);

// âœ… ä½¿ç”¨ Hook
useScrollLock(opened);
```

## ä¸å…¶ä»– Hook ç»“åˆ

### ä¸ useDisclosure ç»“åˆ

```jsx
function Demo() {
  const { isOpen, open, close } = useDisclosure(false);
  useScrollLock(isOpen);

  return (
    <>
      <Button onClick={open}>æ‰“å¼€æ¨¡æ€æ¡†</Button>
      {isOpen && <Modal onClose={close}>...</Modal>}
    </>
  );
}
```

### ä¸ useClickOutside ç»“åˆ

```jsx
function Demo() {
  const [opened, setOpened] = useState(false);
  const ref = useClickOutside(() => setOpened(false));
  useScrollLock(opened);

  return (
    <>
      <Button onClick={() => setOpened(true)}>æ‰“å¼€</Button>
      {opened && (
        <div ref={ref} style={{ position: 'fixed', ... }}>
          å†…å®¹
        </div>
      )}
    </>
  );
}
```

## æœ€ä½³å®è·µ

- ä»…åœ¨å¿…è¦æ—¶é”å®šæ»šåŠ¨ï¼ˆæ¨¡æ€æ¡†ã€æŠ½å±‰ç­‰ï¼‰
- ç¡®ä¿é”å®šæœŸé—´æœ‰æ˜ç¡®çš„è§£é”æ–¹å¼
- ä¿æŒå¼¹çª—å†…å®¹å¯æ»šåŠ¨
- è€ƒè™‘ç§»åŠ¨ç«¯çš„ç”¨æˆ·ä½“éªŒ
- æµ‹è¯•å¤šå±‚å¼¹çª—çš„åœºæ™¯
